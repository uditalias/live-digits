"use strict";angular.module("udidu.live-digits",[]).directive("liveDigits",[function(){return{restrict:"E",replace:!0,scope:{value:"=",duration:"="},template:'<div class="udidu-live-digits"></div>',compile:function(){function a(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})}return function(b,c,d){function e(){k=b.value.toString().split(""),j&&j.length==k.length?f():i(),j=k}function f(){for(var a=0,b=k.length;b>a;a++)k[a]!=j[a]&&(k[a]>j[a]?g(a):h(a))}function g(d){var e=k[d],f=a.call('div[data-idx="{0}"]',d),g=c.find(f);g.prepend(a.call("<div>{0}</div>",e)),g.css("top",-l),g.animate({top:0},b.duration,function(){$(this).find("div:nth-child(2)").remove()})}function h(d){var e=k[d],f=a.call('div[data-idx="{0}"]',d),g=c.find(f);g.append(a.call("<div>{0}</div>",e)),g.animate({top:-l},b.duration,function(){$(this).find("div:nth-child(1)").remove(),g.css("top",0)})}function i(){for(var b=[],d=0,e=k.length;e>d;d++)b.push(a.call('<div data-idx="{0}" class="digit-wrapper"><div>{1}</div></div>',d,k[d]));c.html(b.join("")),l=c.outerHeight(!0),c.css("height",l)}var j=null,k=null,l=0,m=null;b.duration=b.duration||200,m=b.$watch("value",function(){e()}),b.$on("$destroy",function(){m&&m()})}}}}]);